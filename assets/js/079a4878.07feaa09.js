"use strict";(self.webpackChunkdocument=self.webpackChunkdocument||[]).push([[4743],{6138:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"reference/conceptual-reference/core-webcomponent-conceptual-reference","title":"Core Web Component Concepts","description":"The PivotHead Web Component (@mindfiredigital/pivothead-web-component) provides a flexible, framework-agnostic solution for integrating pivot table functionality into any web application. Built as a native Web Component, it offers three distinct rendering modes to accommodate different use cases and UI requirements.","source":"@site/docs/reference/conceptual-reference/core-webcomponent.md","sourceDirName":"reference/conceptual-reference","slug":"/reference/conceptual-reference/core-webcomponent-conceptual-reference","permalink":"/PivotHead/docs/reference/conceptual-reference/core-webcomponent-conceptual-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/mindfiredigital/PivotHead/tree/main/documentation/docs/reference/conceptual-reference/core-webcomponent.md","tags":[],"version":"current","frontMatter":{"id":"core-webcomponent-conceptual-reference","title":"Core Web Component Concepts","sidebar_label":"Core Web Component"},"sidebar":"tutorialSidebar","previous":{"title":"setup-for-user-project","permalink":"/PivotHead/docs/tutorials/vue/setup-for-user-project"},"next":{"title":"WebAssembly & Performance","permalink":"/PivotHead/docs/reference/conceptual-reference/webassembly-conceptual-reference"}}');var s=r(4848),i=r(8453);const o={id:"core-webcomponent-conceptual-reference",title:"Core Web Component Concepts",sidebar_label:"Core Web Component"},l=void 0,a={},c=[{value:"<strong>Overview</strong>",id:"overview",level:2},{value:"<strong>Installation</strong>",id:"installation",level:2},{value:"<strong>Anatomy of a Pivot Table</strong>",id:"anatomy-of-a-pivot-table",level:2},{value:"<strong>Advanced Capabilities</strong>",id:"advanced-capabilities",level:2},{value:"<strong>Connect Service &amp; File Upload</strong>",id:"connect-service--file-upload",level:2},{value:"<strong>Overview</strong>",id:"overview-1",level:3},{value:"<strong>File Upload Methods</strong>",id:"file-upload-methods",level:3},{value:"<strong>1. connectToLocalFile()</strong>",id:"1-connecttolocalfile",level:4},{value:"<strong>2. connectToLocalCSV()</strong>",id:"2-connecttolocalcsv",level:4},{value:"<strong>WebAssembly Performance</strong>",id:"webassembly-performance",level:3},{value:"<strong>Automatic Mode Selection</strong>",id:"automatic-mode-selection",level:4},{value:"<strong>Performance Metrics</strong>",id:"performance-metrics",level:4},{value:"<strong>Complete Example: Large File Upload</strong>",id:"complete-example-large-file-upload",level:3},{value:"<strong>WASM Setup for Demos</strong>",id:"wasm-setup-for-demos",level:3},{value:"<strong>Vite Configuration</strong>",id:"vite-configuration",level:4},{value:"<strong>Error Handling</strong>",id:"error-handling",level:3},{value:"<strong>Console Output Example</strong>",id:"console-output-example",level:3},{value:"<strong>Best Practices</strong>",id:"best-practices",level:3}];function d(e){const n={code:"code",h2:"h2",h3:"h3",h4:"h4",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.p,{children:["The PivotHead Web Component (",(0,s.jsx)(n.code,{children:"@mindfiredigital/pivothead-web-component"}),") provides a flexible, framework-agnostic solution for integrating pivot table functionality into any web application. Built as a native Web Component, it offers three distinct rendering modes to accommodate different use cases and UI requirements."]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:(0,s.jsx)(n.strong,{children:"Overview"})}),"\n",(0,s.jsxs)(n.p,{children:["The package wraps the core PivotHead functionality in a custom HTML element (",(0,s.jsx)(n.code,{children:"<pivot-head>"}),"). This approach ensures compatibility with any JavaScript framework or vanilla HTML while providing:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Framework Agnostic"}),": Works with React, Vue, Angular, or plain HTML."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Three Rendering Modes"}),": Choose between a full UI, a slot-based layout, or a completely headless implementation."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Rich API"}),": Complete access to pivot functionality through properties, methods, and events."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TypeScript Support"}),": Full type definitions included for a better development experience."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Shadow DOM"}),": Encapsulated styles prevent CSS conflicts with your application."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:(0,s.jsx)(n.strong,{children:"Installation"})}),"\n",(0,s.jsx)(n.p,{children:"Install the web component package in your project:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install @mindfiredigital/pivothead-web-component\n"})}),"\n",(0,s.jsx)(n.p,{children:"Then, import the component in your main JavaScript file to register the < pivot-head > custom element:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"\nimport '@mindfiredigital/pivothead-web-component';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"anatomy-of-a-pivot-table",children:(0,s.jsx)(n.strong,{children:"Anatomy of a Pivot Table"})}),"\n",(0,s.jsx)(n.p,{children:"A pivot table consists of several key components that you define in your configuration."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"1. Data Source and Connectivity"}),"\nThe foundation of any pivot table is the raw data. While this is typically a JavaScript array of objects, PivotHead's core provides powerful data connection capabilities. A key feature is the ability to connect directly to local files selected by the user, simplifying data import workflows. The core engine includes services to parse local CSV and JSON files, with configurable options for delimiters and headers, so you don't need to write your own file-parsing logic."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"2. Dimensions vs. Measures"}),"\nFields from your data source are categorized as either dimensions or measures."]}),"\n",(0,s.jsx)(n.p,{children:"Dimensions: These are categorical fields used to group and label your data, such as product names, regions, or dates. You place dimensions on rows and columns to structure the pivot table."}),"\n",(0,s.jsx)(n.p,{children:"Measures : These are the quantifiable, numeric values you want to analyze, like sales figures or quantities. Measures are calculated and displayed in the cells of the pivot table."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"3. Aggregations"}),"\nAggregation is the process of summarizing multiple data records into a single value. You define the aggregation method for each measure, with support for sum, avg, count, min, and max."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Fundamental Operations"}),"\nThe engine provides powerful methods to dynamically manipulate the dataset."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Sorting and Filtering"}),"\nYou can dynamically sort and filter the dataset."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Sorting:"})," You can sort rows based on their labels or by any measure column, in either ascending or descending order."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Filtering:"})," The engine can apply complex filters to narrow down the dataset based on specific criteria."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Grouping and Hierarchies"}),"\nData can be grouped by multiple fields to create expandable and collapsible hierarchies on rows or columns."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:"\ngroupConfig: {\n  rowFields: ['category', 'product'], // Creates a hierarchy of category > product\n  columnFields: ['year', 'quarter'],\n},\n"})}),"\n",(0,s.jsx)(n.h2,{id:"advanced-capabilities",children:(0,s.jsx)(n.strong,{children:"Advanced Capabilities"})}),"\n",(0,s.jsx)(n.p,{children:"Custom Measures & Formulas\nYou can create new measures on the fly using custom formulas, allowing you to derive new insights without modifying your original dataset."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-JavaScript",children:"\n// Example: Calculate profit margin from sales and cost fields.\n{\n  uniqueName: 'profitMargin',\n  caption: 'Profit Margin',\n  aggregation: 'avg',\n  format: { type: 'percentage', decimals: 2 },\n  formula: item => (item.sales - item.cost) / item.sales,\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Conditional Formatting"}),"\nYou can define rules in your configuration to apply specific styles to cells that meet certain criteria. The engine identifies which cells match, and your rendering logic can then apply the specified styles."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Interactivity and Dynamic Reports"}),'\nDynamic Report Building (Fields Panel)\nA key feature of modern pivot tables is the "Fields" panel, which lets users drag and drop data fields into different areas (Rows, Columns, Values) to build their own reports dynamically. As a headless library, PivotHead enables you to build this feature. Your custom UI can call engine methods like setDimensions() and setMeasures() to reconfigure the pivot table on the fly, giving you complete freedom to design the fields panel experience.']}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"User Interaction Support"}),"\nThe core engine includes logic to support a rich, interactive user experience."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Drag & Drop:"})," Methods like dragRow() and dragColumn() handle the logic for reordering items, making it simple for you to build an interactive drag-and-drop UI."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Resizing:"})," The resizeRow() method provides the backend logic for interactive row resizing."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Rendering Modes"}),"\nThe web component supports three modes, controlled by the mode attribute."]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Default Mode (Full UI)"}),"\nThis mode renders a complete pivot table interface with built-in controls, filters, and pagination. It's the quickest way to get a full-featured pivot table running."]}),"\n",(0,s.jsx)(n.p,{children:"Usage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-HTML",children:'\n<pivot-head\n  data=\'[{"country":"USA","category":"Bikes","price":1500}]\'\n  options=\'{\n    "rows":[{"uniqueName":"country","caption":"Country"}],\n    "columns":[{"uniqueName":"category","caption":"Category"}],\n    "measures":[{"uniqueName":"price","caption":"Total Price","aggregation":"sum"}]\n  }\'\n></pivot-head>\n'})}),"\n",(0,s.jsx)(n.p,{children:"When to Use:"}),"\n",(0,s.jsx)(n.p,{children:"For rapid prototyping and demos."}),"\n",(0,s.jsx)(n.p,{children:"When you need a standard, out-of-the-box pivot table with minimal setup."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Minimal Mode (Slot-based)"}),"\nThis mode provides a lightweight container with named slots (header and body), giving you control over the UI while leveraging the component's data processing."]}),"\n",(0,s.jsx)(n.p,{children:"Usage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-HTML",children:'\n<pivot-head mode="minimal" id="pivot">\n  <div slot="header">\n    <button id="exportBtn">Export PDF</button>\n  </div>\n\n  <div slot="body">\n    <table id="custom-table"></table>\n  </div>\n</pivot-head>\n\n<script type="module">\n  import \'@mindfiredigital/pivothead-web-component\';\n  const pivot = document.getElementById(\'pivot\');\n  const table = document.getElementById(\'custom-table\');\n\n  pivot.data = yourDataArray;\n  pivot.options = yourOptionsObject;\n\n  pivot.addEventListener(\'stateChange\', e => {\n    const state = e.detail;\n    // Your custom rendering logic here\n    renderMyTable(table, state.processedData);\n  });\n\n  document.getElementById(\'exportBtn\').onclick = () => {\n    pivot.exportToPDF();\n  };\n<\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"When to Use:"}),"\n",(0,s.jsx)(n.p,{children:"When you need to match your application's specific design system."}),"\n",(0,s.jsx)(n.p,{children:"For adding custom controls or integrating with existing component libraries."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"None Mode (Headless)"}),"\nThis mode provides pure data processing without rendering any UI. The component can be hidden, and you interact with it entirely through its JavaScript API to build a completely custom experience."]}),"\n",(0,s.jsx)(n.p,{children:"Usage:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-HTML",children:'\n<pivot-head id="pivot" mode="none" style="display: none;"></pivot-head>\n\n<div id="my-custom-ui">\n  <button id="sortBtn">Sort by Sales</button>\n  <div id="results"></div>\n</div>\n\n<script type="module">\n  import \'@mindfiredigital/pivothead-web-component\';\n  const pivot = document.getElementById(\'pivot\');\n\n  pivot.data = yourDataArray;\n  pivot.options = yourOptionsObject;\n\n  pivot.addEventListener(\'stateChange\', e => {\n    const state = e.detail;\n    // Logic to render your entire UI from scratch\n    buildMyUI(state);\n  });\n\n  document.getElementById(\'sortBtn\').onclick = () => {\n    pivot.sort(\'sales\', \'desc\');\n  };\n<\/script>\n'})}),"\n",(0,s.jsx)(n.p,{children:"When to Use:"}),"\n",(0,s.jsx)(n.p,{children:"For maximum flexibility and complete control over the UI."}),"\n",(0,s.jsx)(n.p,{children:"When integrating pivot logic into complex or non-tabular data visualizations."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"connect-service--file-upload",children:(0,s.jsx)(n.strong,{children:"Connect Service & File Upload"})}),"\n",(0,s.jsxs)(n.p,{children:["PivotHead provides a powerful ",(0,s.jsx)(n.strong,{children:"Connect Service"})," that enables seamless integration with local files, allowing users to upload CSV and JSON files directly into the pivot table. This service includes built-in WebAssembly optimization for handling large files efficiently."]}),"\n",(0,s.jsx)(n.h3,{id:"overview-1",children:(0,s.jsx)(n.strong,{children:"Overview"})}),"\n",(0,s.jsx)(n.p,{children:"The Connect Service provides:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Local File Upload"}),": Direct upload of CSV/JSON files from user's device"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"WebAssembly Integration"}),": Automatic WASM acceleration for large files (800 MB+)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Streaming Support"}),": Memory-efficient processing for massive datasets"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Progress Tracking"}),": Real-time upload and processing feedback"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Error Handling"}),": Robust validation and error recovery"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"file-upload-methods",children:(0,s.jsx)(n.strong,{children:"File Upload Methods"})}),"\n",(0,s.jsx)(n.h4,{id:"1-connecttolocalfile",children:(0,s.jsx)(n.strong,{children:"1. connectToLocalFile()"})}),"\n",(0,s.jsx)(n.p,{children:"Generic method for uploading CSV or JSON files with automatic format detection."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"import '@mindfiredigital/pivothead-web-component';\n\nconst pivot = document.querySelector('pivot-head');\n\n// Basic usage\nconst result = await pivot.connectToLocalFile({\n  maxFileSize: 1024 * 1024 * 1024, // 1 GB max (default)\n  onProgress: progress => {\n    console.log(`Upload progress: ${progress}%`);\n  },\n});\n\nif (result.success) {\n  console.log('File uploaded successfully!');\n  console.log(`Records: ${result.recordCount}`);\n  console.log(`Performance Mode: ${result.performanceMode}`);\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Options:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"maxFileSize"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"number"})}),(0,s.jsx)(n.td,{children:"1 GB"}),(0,s.jsx)(n.td,{children:"Maximum file size in bytes"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"onProgress"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"function"})}),(0,s.jsx)(n.td,{children:"null"}),(0,s.jsx)(n.td,{children:"Progress callback function"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Return Value:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"{\n  success: boolean;\n  fileName: string;\n  fileSize: number;\n  recordCount: number;\n  performanceMode: 'standard' | 'workers' | 'wasm' | 'streaming-wasm';\n  error?: string;\n}\n"})}),"\n",(0,s.jsx)(n.h4,{id:"2-connecttolocalcsv",children:(0,s.jsx)(n.strong,{children:"2. connectToLocalCSV()"})}),"\n",(0,s.jsx)(n.p,{children:"Specialized method for CSV files with advanced parsing options."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"const result = await pivot.connectToLocalCSV({\n  // File size limits\n  maxFileSize: 1024 * 1024 * 1024, // 1 GB\n\n  // CSV parsing options\n  csv: {\n    delimiter: ',',\n    hasHeader: true,\n    skipEmptyLines: true,\n    trimValues: true,\n    encoding: 'utf-8',\n  },\n\n  // Progress tracking\n  onProgress: progress => {\n    updateProgressBar(progress);\n  },\n});\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CSV Options:"})}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Option"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"delimiter"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:","})}),(0,s.jsx)(n.td,{children:"Field separator character"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"hasHeader"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"First row contains headers"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"skipEmptyLines"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"Skip blank rows"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"trimValues"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"boolean"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"true"})}),(0,s.jsx)(n.td,{children:"Remove whitespace from values"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"encoding"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"string"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"'utf-8'"})}),(0,s.jsx)(n.td,{children:"File character encoding"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"webassembly-performance",children:(0,s.jsx)(n.strong,{children:"WebAssembly Performance"})}),"\n",(0,s.jsx)(n.p,{children:"The Connect Service automatically leverages WebAssembly for large files, providing massive performance improvements:"}),"\n",(0,s.jsx)(n.h4,{id:"automatic-mode-selection",children:(0,s.jsx)(n.strong,{children:"Automatic Mode Selection"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// The system automatically chooses the optimal processing mode:\n\n// Small files (< 1 MB): Standard JavaScript\nconst result = await pivot.connectToLocalFile();\n// performanceMode: 'standard'\n\n// Medium files (1-5 MB): Web Workers\nconst result = await pivot.connectToLocalFile();\n// performanceMode: 'workers'\n\n// Large files (5-8 MB): Pure WASM\nconst result = await pivot.connectToLocalFile();\n// performanceMode: 'wasm'\n\n// Very large files (> 8 MB, up to 800 MB): Streaming + WASM Hybrid\nconst result = await pivot.connectToLocalFile();\n// performanceMode: 'streaming-wasm'\n"})}),"\n",(0,s.jsx)(n.h4,{id:"performance-metrics",children:(0,s.jsx)(n.strong,{children:"Performance Metrics"})}),"\n",(0,s.jsxs)(n.p,{children:["For an ",(0,s.jsx)(n.strong,{children:"800 MB CSV file"}),":"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Metric"}),(0,s.jsx)(n.th,{children:"Standard JS"}),(0,s.jsx)(n.th,{children:"Streaming + WASM"}),(0,s.jsx)(n.th,{children:"Improvement"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Processing Time"})}),(0,s.jsx)(n.td,{children:"Would crash"}),(0,s.jsx)(n.td,{children:"2-3 seconds"}),(0,s.jsx)(n.td,{children:"Works!"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Memory Usage"})}),(0,s.jsx)(n.td,{children:"> 2 GB"}),(0,s.jsx)(n.td,{children:"~50 MB"}),(0,s.jsx)(n.td,{children:"40x less"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Parse Speed"})}),(0,s.jsx)(n.td,{children:"N/A"}),(0,s.jsx)(n.td,{children:"~200ms per 4MB chunk"}),(0,s.jsx)(n.td,{children:"37x faster"})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"complete-example-large-file-upload",children:(0,s.jsx)(n.strong,{children:"Complete Example: Large File Upload"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<!DOCTYPE html>\n<html>\n  <head>\n    <title>Large File Upload Demo</title>\n  </head>\n  <body>\n    <div>\n      <button id=\"uploadBtn\">Upload Large CSV File</button>\n      <div id=\"progress\" style=\"display: none;\">\n        <div\n          id=\"progressBar\"\n          style=\"width: 0%; height: 20px; background: #4CAF50;\"\n        ></div>\n        <span id=\"progressText\">0%</span>\n      </div>\n      <div id=\"status\"></div>\n    </div>\n\n    <pivot-head id=\"pivot\" mode=\"none\" style=\"display: none;\"></pivot-head>\n\n    <div id=\"results\"></div>\n\n    <script type=\"module\">\n      import '@mindfiredigital/pivothead-web-component';\n\n      const pivot = document.getElementById('pivot');\n      const uploadBtn = document.getElementById('uploadBtn');\n      const progressDiv = document.getElementById('progress');\n      const progressBar = document.getElementById('progressBar');\n      const progressText = document.getElementById('progressText');\n      const statusDiv = document.getElementById('status');\n      const resultsDiv = document.getElementById('results');\n\n      uploadBtn.addEventListener('click', async () => {\n        try {\n          statusDiv.textContent = 'Uploading file...';\n          progressDiv.style.display = 'block';\n\n          const result = await pivot.connectToLocalFile({\n            maxFileSize: 1024 * 1024 * 1024, // 1 GB\n            onProgress: progress => {\n              progressBar.style.width = `${progress}%`;\n              progressText.textContent = `${progress}%`;\n            },\n          });\n\n          if (result.success) {\n            statusDiv.innerHTML = `\n            File uploaded successfully!<br>\n             File: ${result.fileName}<br>\n             Records: ${result.recordCount.toLocaleString()}<br>\n             Mode: ${result.performanceMode}<br>\n             Size: ${(result.fileSize / 1024 / 1024).toFixed(2)} MB\n          `;\n\n            // Get the processed data\n            const state = pivot.getState();\n\n            // Render your custom UI\n            renderTable(state.data);\n          } else {\n            statusDiv.textContent = ` Upload failed: ${result.error}`;\n          }\n        } catch (error) {\n          statusDiv.textContent = ` Error: ${error.message}`;\n        } finally {\n          progressDiv.style.display = 'none';\n        }\n      });\n\n      function renderTable(data) {\n        // Your custom table rendering logic\n        resultsDiv.innerHTML = `\n        <h3>Data Preview (first 100 rows)</h3>\n        <table>\n          ${data\n            .slice(0, 100)\n            .map(\n              row => `\n            <tr>${Object.values(row)\n              .map(val => `<td>${val}</td>`)\n              .join('')}</tr>\n          `\n            )\n            .join('')}\n        </table>\n      `;\n      }\n    <\/script>\n  </body>\n</html>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"wasm-setup-for-demos",children:(0,s.jsx)(n.strong,{children:"WASM Setup for Demos"})}),"\n",(0,s.jsx)(n.p,{children:"For development and demo projects, ensure WASM files are available:"}),"\n",(0,s.jsx)(n.h4,{id:"vite-configuration",children:(0,s.jsx)(n.strong,{children:"Vite Configuration"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"// vite.config.js\nimport { defineConfig } from 'vite';\nimport { resolve } from 'path';\nimport { copyFileSync, mkdirSync, existsSync } from 'fs';\n\nexport default defineConfig({\n  plugins: [\n    {\n      name: 'copy-wasm-files',\n      buildStart() {\n        const wasmSource = resolve(\n          __dirname,\n          'node_modules/@mindfiredigital/pivothead/dist/wasm/csvParser.wasm'\n        );\n        const wasmDest = resolve(__dirname, 'public/wasm/csvParser.wasm');\n        const wasmDir = resolve(__dirname, 'public/wasm');\n\n        if (!existsSync(wasmDir)) {\n          mkdirSync(wasmDir, { recursive: true });\n        }\n\n        if (existsSync(wasmSource)) {\n          copyFileSync(wasmSource, wasmDest);\n          console.log('\u2705 Copied WASM file to public/wasm/');\n        }\n      },\n    },\n  ],\n  server: {\n    fs: {\n      strict: false,\n      allow: ['..'],\n    },\n  },\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"error-handling",children:(0,s.jsx)(n.strong,{children:"Error Handling"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"try {\n  const result = await pivot.connectToLocalFile();\n\n  if (!result.success) {\n    // Handle specific errors\n    switch (result.error) {\n      case 'FILE_TOO_LARGE':\n        alert('File is too large. Maximum size is 1 GB.');\n        break;\n      case 'INVALID_FORMAT':\n        alert('Invalid file format. Please upload a CSV or JSON file.');\n        break;\n      case 'PARSE_ERROR':\n        alert('Failed to parse file. Please check the file format.');\n        break;\n      default:\n        alert(`Upload failed: ${result.error}`);\n    }\n  }\n} catch (error) {\n  console.error('Unexpected error:', error);\n  alert('An unexpected error occurred during file upload.');\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"console-output-example",children:(0,s.jsx)(n.strong,{children:"Console Output Example"})}),"\n",(0,s.jsx)(n.p,{children:"When uploading an 1 GB CSV file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:" Large file detected (1 GB). Using Streaming + WASM hybrid mode...\n Loading WebAssembly CSV parser...\n Loading WASM from: /wasm/csvParser.wasm\n WASM file loaded successfully (3555 bytes)\n WebAssembly CSV parser loaded successfully (v1520)\nProcessing with WASM, chunk size: 4 MB\nProcessing CSV with WebAssembly...\nWASM parsed: 52,776 rows, 6 columns\nWASM processing completed in 289.50ms\nChunk 0 processed: 52,774 rows (total: 52,774)\nWASM parsed: 52,756 rows, 6 columns\nWASM processing completed in 192.50ms\nChunk 1 processed: 52,755 rows (total: 105,529)\n...\nFile processing complete: 2,000,000 rows in 2.8 seconds\n"})}),"\n",(0,s.jsx)(n.h3,{id:"best-practices",children:(0,s.jsx)(n.strong,{children:"Best Practices"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Always show progress feedback"})," for large files"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Handle errors gracefully"})," with user-friendly messages"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Set appropriate file size limits"})," based on your use case"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Test with various file sizes"})," to verify performance"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Use WASM for production"})," deployments handling large datasets"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Implement proper loading states"})," during file processing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Validate file format"})," before processing"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var t=r(6540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);